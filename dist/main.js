(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}();class e{constructor(t){Object.defineProperty(this,"getItem",{enumerable:!1,value:t.fn((t=>void 0!==this[t]?this[t]:null))}),Object.defineProperty(this,"setItem",{enumerable:!1,value:t.fn(((t,e="")=>{this[t]=e+""}))}),Object.defineProperty(this,"removeItem",{enumerable:!1,value:t.fn((t=>{delete this[t]}))}),Object.defineProperty(this,"clear",{enumerable:!1,value:t.fn((()=>{Object.keys(this).map((t=>delete this[t]))}))}),Object.defineProperty(this,"toString",{enumerable:!1,value:t.fn((()=>"[object Storage]"))}),Object.defineProperty(this,"key",{enumerable:!1,value:t.fn((t=>Object.keys(this)[t]||null))})}get length(){return Object.keys(this).length}get __STORE__(){return this}}void 0!==t.g._localStorage?Object.defineProperty(t.g,"_localStorage",{value:new e(jest),writable:!1}):t.g.localStorage=new e(jest),void 0!==t.g._sessionStorage?Object.defineProperty(t.g,"_sessionStorage",{value:new e(jest),writable:!1}):t.g.sessionStorage=new e(jest);const o=document.getElementById("project-todos"),n=document.getElementById("todo-creation-form"),r=()=>{let t=[];const e=localStorage.getItem("allProjects");if(null===e){const e={title:"default",todos:[],addTodo(t){this.todos.push(t)}};t.push(e),localStorage.setItem("allProjects",JSON.stringify(t))}else t=JSON.parse(e);return t},d={current:r()[0]};class i{constructor(t,e,o,n){this.title=t,this.description=e,this.priority=o,this.dueDate=n}}const s=(t,e,n)=>{o.innerHTML="",t.current.todos.forEach((d=>{const i=document.createElement("div");i.className="todo-card";const c=document.createElement("h4");c.textContent=d.title,c.className="todo-title";const l=document.createElement("p");l.textContent=d.description,l.className="todo-desc";const u=document.createElement("p");u.textContent=d.dueDate,u.className="todo-dueDate";const a=document.createElement("p");a.textContent=`${d.priority}`,a.className="todo-priority";const m=document.createElement("button");m.innerHTML="Edit",m.className="update-todo-btn",m.addEventListener("click",(()=>{document.getElementById("new-todo-creation-form").remove(),n(d,s,e)}));const p=document.createElement("button");p.innerText="delete",p.id="todo-dlt-btn",p.addEventListener("click",(()=>{const o=r(),i=o.findIndex((e=>e.title===t.current.title));t.current=o[i];const c=t.current.todos.findIndex((t=>t.title===d.title));t.current.todos.splice(c,1),localStorage.setItem("allProjects",JSON.stringify(o)),s(t,e,n)})),i.append(c,l,a,u,m,p),o.append(i)}))},c=(t,e)=>{const o=document.createElement("form");o.id="new-todo-creation-form";const s=document.createElement("input");s.setAttribute("type","text"),s.setAttribute("required","true"),s.setAttribute("placeholder","todo title"),s.id="todo-title";const l=document.createElement("input");l.setAttribute("type","text"),l.setAttribute("required","true"),l.setAttribute("placeholder","some description.."),l.id="todo-desc";const u=document.createElement("input");u.setAttribute("type","date"),u.setAttribute("required","true"),u.setAttribute("placeholder","due date"),u.id="todo-priority";const a=document.createElement("select");a.setAttribute("id","priority"),a.id="todo-dueDate";const m=["Very high","High","Moderate","Low","Useless"].map((t=>`<option value="${t.toLowerCase()}">${t}</option>`));a.innerHTML=m;const p=document.createElement("input");return p.setAttribute("type","submit"),p.id="todo-form-submit",o.append(s,l,u,a,p),n.innerHTML="",n.append(o),o.addEventListener("submit",(o=>{o.preventDefault();const n=document.getElementById("todo-title").value,s=document.getElementById("todo-desc").value,l=document.getElementById("todo-priority").value,u=document.getElementById("todo-dueDate").value,a=new i(n,s,l,u),m=r(),p=m.findIndex((t=>t.title===d.current.title));d.current=m[p],d.current.todos.push(a),localStorage.setItem("allProjects",JSON.stringify(m)),t(d,c,e)})),o},l=(t,e,o)=>{const i=document.createElement("form");i.id="modify-todo-form";const s=document.createElement("input");s.setAttribute("type","text"),s.setAttribute("required","true"),s.setAttribute("placeholder","todo title"),s.id="todo-title-modify";const c=document.createElement("input");c.setAttribute("type","text"),c.setAttribute("required","true"),c.setAttribute("placeholder","some description.."),c.id="todo-desc-modify";const u=document.createElement("input");u.setAttribute("type","date"),u.setAttribute("required","true"),u.setAttribute("placeholder","due date"),u.id="todo-priority-modify";const a=document.createElement("select");a.setAttribute("id","priority"),a.id="todo-dueDate-modify";const m=["Very high","High","Moderate","Low","Useless"].map((t=>`<option value="${t.toLowerCase()}">${t}</option>`));a.innerHTML=m;const p=document.createElement("input");return p.value="Update Todo",p.setAttribute("type","submit"),p.id="todo-form-submit-modify",i.append(s,c,u,a,p),n.append(i),i.addEventListener("submit",(n=>{n.preventDefault();const i=r(),s=i.findIndex((t=>t.title===d.current.title));d.current=i[s];const c=d.current.todos.findIndex((e=>e.title===t.title)),u=d.current.todos[c];u.title=document.getElementById("todo-title-modify").value,u.description=document.getElementById("todo-desc-modify").value,u.priority=document.getElementById("todo-priority-modify").value,u.dueDate=document.getElementById("todo-dueDate-modify").value,localStorage.setItem("allProjects",JSON.stringify(i)),e(d,o,l),document.getElementById("modify-todo-form").remove(),o(e)})),i};class u{constructor(t){this.title=t,this.todos=[]}addTodo=t=>{this.todos.push(t)}}const a=()=>{const t=document.getElementById("all-projects"),e=r();t.innerHTML="",e.forEach(((e,n)=>{const i=((t,e)=>{const n=document.createElement("a");return n.id="project-div",n.textContent=t.title,n.dataset.index=e,n.addEventListener("click",(t=>{((t,e)=>{const n=t.target,i=Number(n.dataset.index),c=r();d.current=c[i],o.innerHTML="",s(d,e,l),e(s)})(t,c)})),n})(e,n);t.append(i)}))};document.getElementById("input-form").addEventListener("submit",(t=>{t.preventDefault();const e=document.getElementById("title").value;(t=>r().find((e=>e.title===t)))(e)?alert("Project name already taken!"):((t=>{const e=r();e.push(t),localStorage.setItem("allProjects",JSON.stringify(e))})(new u(e)),a())})),document.addEventListener("DOMContentLoaded",(()=>{a()}))})();